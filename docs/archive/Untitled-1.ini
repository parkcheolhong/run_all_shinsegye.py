"""
ğŸ§ ğŸ§  ì‹ ì„¸ê³„ íˆ¬ì‚¬ì´í´ ì†Œë¦¬ìƒˆ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ - ì˜¤ë¥˜ ìˆ˜ì • ì™„ë£Œ ë²„ì „
"""

import os
import sys
import threading
import time
import json
import logging
from datetime import datetime
import random

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ ì„¤ì •
project_root = os.path.dirname(os.path.abspath(__file__))
sys.path.insert(0, project_root)

# ì´ë¯¸ í†µí•©ëœ ì†Œë¦¬ìƒˆ ì½”ì–´ ì‹œìŠ¤í…œ
from modules.ai_code_manager.sorisay_core_controller import SorisayCore

class DualBrainShinsegyeSystem:
    """ì‹ ì„¸ê³„ íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ - ì•ˆì •í™” ë²„ì „"""
    
    def __init__(self):
        print("ğŸ§ ğŸ§  ì‹ ì„¸ê³„ íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ì´ˆê¸°í™”...")
        
        # ê¸°ë³¸ ì„¤ì •
        self.system_name = "ì‹ ì„¸ê³„ íˆ¬ì‚¬ì´í´ ì†Œë¦¬ìƒˆ ë¸Œë ˆì¸"
        self.version = "2.5.0 - ì•ˆì •í™” ë²„ì „"
        self.initialized_at = datetime.now()
        
        # ë¸Œë ˆì¸ ìƒíƒœ
        self.dual_brain_active = False
        self.brain_a_running = False  # ì‹¤ì‹œê°„ ì²˜ë¦¬ ë¸Œë ˆì¸
        self.brain_b_running = False  # ì§„í™” ë¸Œë ˆì¸
        
        # ë¸Œë ˆì¸ ì„¤ì •
        self.brain_settings = {
            'brain_a_cycle': 0.1,    # 100ms (ì•ˆì •í™”)
            'brain_b_cycle': 5.0,    # 5ì´ˆ (ì•ˆì •í™”)
            'learning_multiplier': 720  # 720ë°° (ì•ˆì •í™”)
        }
        
        # ì§„í™” í†µê³„
        self.evolution_stats = {
            'cycles_completed': 0,
            'features_evolved': 0,
            'songs_created': 0,
            'dreams_interpreted': 0,
            'quantum_processes': 0,
            'creative_ideas': 0
        }
        
        # AI ëª¨ë“ˆë“¤
        self.ai_modules = {}
        
        # TTS ì—”ì§„
        self.tts_engine = self._init_tts()
        
        print("âœ… íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ!")
    
    def _init_tts(self):
        """TTS ì—”ì§„ ì´ˆê¸°í™” (ì˜¤ë¥˜ ë°©ì§€)"""
        try:
            import pyttsx3
            engine = pyttsx3.init()
            engine.setProperty('rate', 200)
            engine.setProperty('volume', 0.9)
            return engine
        except:
            print("â„¹ï¸ TTS ì—”ì§„ ì‚¬ìš© ë¶ˆê°€ - í…ìŠ¤íŠ¸ ëª¨ë“œë¡œ ì‹¤í–‰")
            return None
    
    def start_dual_brain_system(self):
        """íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ì‹œì‘"""
        try:
            print("ğŸš€ íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ê°€ë™!")
            
            self.dual_brain_active = True
            
            # ë¸Œë ˆì¸ A ìŠ¤ë ˆë“œ (ì‹¤ì‹œê°„ ì²˜ë¦¬)
            brain_a_thread = threading.Thread(target=self._run_brain_a, daemon=True)
            brain_a_thread.start()
            self.brain_a_running = True
            
            # ë¸Œë ˆì¸ B ìŠ¤ë ˆë“œ (ì§„í™” ì²˜ë¦¬)
            brain_b_thread = threading.Thread(target=self._run_brain_b, daemon=True)
            brain_b_thread.start()
            self.brain_b_running = True
            
            # AI ëª¨ë“ˆ ì´ˆê¸°í™”
            self._initialize_ai_modules()
            
            self.speak("íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ì´ ê°€ë™ë˜ì—ˆìŠµë‹ˆë‹¤!")
            print("ğŸ§ ğŸ§  íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ê°€ë™ ì™„ë£Œ!")
            
            return True
            
        except Exception as e:
            print(f"âŒ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ê°€ë™ ì˜¤ë¥˜: {e}")
            return False
    
    def _run_brain_a(self):
        """ë¸Œë ˆì¸ A: ì‹¤ì‹œê°„ ì²˜ë¦¬ (100ms ì£¼ê¸°)"""
        print("ğŸ§  ë¸Œë ˆì¸ A (ì‹¤ì‹œê°„ ì²˜ë¦¬) ê°€ë™ ì‹œì‘")
        
        while self.dual_brain_active:
            try:
                # ì‹¤ì‹œê°„ ì²˜ë¦¬ ì‹œë®¬ë ˆì´ì…˜
                self._process_real_time_operations()
                
                # 100ms ì£¼ê¸°
                time.sleep(self.brain_settings['brain_a_cycle'])
                
            except Exception as e:
                print(f"âš ï¸ ë¸Œë ˆì¸ A ì˜¤ë¥˜: {e}")
                time.sleep(1)
    
    def _run_brain_b(self):
        """ë¸Œë ˆì¸ B: ì§„í™” ì²˜ë¦¬ (5ì´ˆ ì£¼ê¸°)"""
        print("ğŸ§  ë¸Œë ˆì¸ B (ì§„í™” ì²˜ë¦¬) ê°€ë™ ì‹œì‘")
        
        while self.dual_brain_active:
            try:
                # ì§„í™” ì²˜ë¦¬ ì‹¤í–‰
                evolution_result = self._process_evolution_cycle()
                
                self.evolution_stats['cycles_completed'] += 1
                
                if evolution_result.get('breakthrough'):
                    self.evolution_stats['features_evolved'] += 1
                    print(f"ğŸŒŸ ì§„í™” ëŒíŒŒ! (ì´ {self.evolution_stats['features_evolved']}íšŒ)")
                
                print(f"ğŸ”„ ì§„í™” ì‚¬ì´í´ #{self.evolution_stats['cycles_completed']} ì™„ë£Œ")
                
                # 5ì´ˆ ì£¼ê¸°
                time.sleep(self.brain_settings['brain_b_cycle'])
                
            except Exception as e:
                print(f"âš ï¸ ë¸Œë ˆì¸ B ì˜¤ë¥˜: {e}")
                time.sleep(5)
    
    def _initialize_ai_modules(self):
        """AI ëª¨ë“ˆë“¤ ì´ˆê¸°í™”"""
        try:
            # AI ì‘ê³¡ê°€
            self.ai_modules['composer'] = SimpleAIComposer()
            
            # ì†Œë¦¬ìƒˆ ì½”ì–´
            self.ai_modules['sorisay'] = SimpleSorisayCore()
            
            # ê¿ˆ í•´ì„ì‚¬
            self.ai_modules['dream'] = SimpleDreamInterpreter()
            
            print("âœ… AI ëª¨ë“ˆ ì´ˆê¸°í™” ì™„ë£Œ")
            
        except Exception as e:
            print(f"âš ï¸ AI ëª¨ë“ˆ ì´ˆê¸°í™” ì˜¤ë¥˜: {e}")
    
    def handle_voice_command(self, command):
        """ìŒì„± ëª…ë ¹ ì²˜ë¦¬"""
        try:
            cmd_lower = command.lower()
            
            # ì‹œìŠ¤í…œ ìƒíƒœ ëª…ë ¹
            if any(word in cmd_lower for word in ["ìƒíƒœ", "status", "ë³´ê³ ì„œ"]):
                return self._generate_status_report()
            
            # íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ëª…ë ¹
            elif any(word in cmd_lower for word in ["íˆ¬ì‚¬ì´í´", "ë“€ì–¼", "ë¸Œë ˆì¸"]):
                return self._handle_brain_commands(cmd_lower)
            
            # ìŒì•… ì‘ê³¡ ëª…ë ¹
            elif any(word in cmd_lower for word in ["ë…¸ë˜", "ì‘ê³¡", "ìŒì•…", "ë©œë¡œë””"]):
                return self._handle_music_commands(command)
            
            # ê¿ˆ í•´ì„ ëª…ë ¹
            elif any(word in cmd_lower for word in ["ê¿ˆ", "dream", "í•´ì„"]):
                return self._handle_dream_commands(command)
            
            # ì¼ë°˜ ëŒ€í™”
            else:
                return self._handle_general_commands(command)
                
        except Exception as e:
            return f"ëª…ë ¹ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜: {e}"
    
    def _generate_status_report(self):
        """ì‹œìŠ¤í…œ ìƒíƒœ ë³´ê³ ì„œ"""
        uptime = datetime.now() - self.initialized_at
        
        return f"""ğŸ§ ğŸ§  ì‹ ì„¸ê³„ íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ìƒíƒœ ë³´ê³ ì„œ

ã€ë¸Œë ˆì¸ A - ì‹¤ì‹œê°„ ì²˜ë¦¬ã€‘
âš¡ ì²˜ë¦¬ ì£¼ê¸°: {self.brain_settings['brain_a_cycle']*1000}ms
ğŸ”„ ìƒíƒœ: {'ğŸŸ¢ ê°€ë™ì¤‘' if self.brain_a_running else 'ğŸ”´ ì¤‘ì§€'}

ã€ë¸Œë ˆì¸ B - ì§„í™” ì²˜ë¦¬ã€‘  
ğŸ”„ ì§„í™” ì£¼ê¸°: {self.brain_settings['brain_b_cycle']}ì´ˆ
ğŸ“ˆ í•™ìŠµ ë°°ì†: {self.brain_settings['learning_multiplier']}ë°°
ğŸŒŸ ìƒíƒœ: {'ğŸŸ¢ ì§„í™”ì¤‘' if self.brain_b_running else 'ğŸ”´ ì¤‘ì§€'}

ã€ì„±ê³¼ ì§€í‘œã€‘
ğŸ”„ ì™„ë£Œ ì‚¬ì´í´: {self.evolution_stats['cycles_completed']}íšŒ
ğŸŒŸ ì§„í™” ëŒíŒŒ: {self.evolution_stats['features_evolved']}íšŒ
ğŸµ ìƒì„± ìŒì•…: {self.evolution_stats['songs_created']}ê³¡
ğŸŒ™ í•´ì„ ê¿ˆ: {self.evolution_stats['dreams_interpreted']}íšŒ

â±ï¸ ê°€ë™ ì‹œê°„: {str(uptime).split('.')[0]}
ğŸ¯ ì‹œìŠ¤í…œ íš¨ìœ¨: 95%

íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ì´ {self.brain_settings['learning_multiplier']}ë°° ë¹ ë¥¸ ì†ë„ë¡œ ì§„í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤! ğŸš€"""
    
    def _handle_music_commands(self, command):
        """ìŒì•… ëª…ë ¹ ì²˜ë¦¬"""
        if 'composer' in self.ai_modules:
            result = self.ai_modules['composer'].create_music(command)
            self.evolution_stats['songs_created'] += 1
            return result
        else:
            return "AI ì‘ê³¡ê°€ê°€ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
    
    def _handle_dream_commands(self, command):
        """ê¿ˆ í•´ì„ ëª…ë ¹ ì²˜ë¦¬"""
        if 'dream' in self.ai_modules:
            result = self.ai_modules['dream'].interpret_dream(command)
            self.evolution_stats['dreams_interpreted'] += 1
            return result
        else:
            return "ê¿ˆ í•´ì„ì‚¬ê°€ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
    
    def _handle_general_commands(self, command):
        """ì¼ë°˜ ëª…ë ¹ ì²˜ë¦¬"""
        if 'sorisay' in self.ai_modules:
            return self.ai_modules['sorisay'].respond(command)
        else:
            return "íˆ¬ì‚¬ì´í´ ì†Œë¦¬ìƒˆê°€ ì—´ì‹¬íˆ í•™ìŠµ ì¤‘ì…ë‹ˆë‹¤!"
    
    def speak(self, text):
        """ìŒì„± ì¶œë ¥"""
        if self.tts_engine:
            try:
                self.tts_engine.say(text)
                self.tts_engine.runAndWait()
            except:
                print(f"ğŸ”Š {text}")
        else:
            print(f"ğŸ”Š {text}")
    
    def _process_real_time_operations(self):
        """ì‹¤ì‹œê°„ ì²˜ë¦¬ ì‹œë®¬ë ˆì´ì…˜"""
        # ê°„ë‹¨í•œ ì‹¤ì‹œê°„ ì²˜ë¦¬ ì‹œë®¬ë ˆì´ì…˜
        pass
    
    def _process_evolution_cycle(self):
        """ì§„í™” ì‚¬ì´í´ ì²˜ë¦¬"""
        # ì§„í™” ì²˜ë¦¬ ì‹œë®¬ë ˆì´ì…˜
        breakthrough_chance = random.random()
        return {
            'breakthrough': breakthrough_chance > 0.7,
            'evolution_score': random.uniform(0.8, 1.0)
        }

class SimpleAIComposer:
    """ê°„ë‹¨í•œ AI ì‘ê³¡ê°€"""
    
    def __init__(self):
        self.name = "íˆ¬ì‚¬ì´í´ AI ì‘ê³¡ê°€"
        self.songs_made = 0
    
    def create_music(self, request):
        """ìŒì•… ìƒì„±"""
        self.songs_made += 1
        
        # ìš”ì²­ ë¶„ì„
        request_lower = request.lower()
        
        if any(word in request_lower for word in ['ì‚¬ë‘', 'love']):
            genre = 'ì‚¬ë‘ ë°œë¼ë“œ'
            mood = 'ë¡œë§¨í‹±'
        elif any(word in request_lower for word in ['í–‰ë³µ', 'ê¸°ìœ']):
            genre = 'í–‰ë³µí•œ íŒ'
            mood = 'ì¦ê±°ìš´'
        elif any(word in request_lower for word in ['ìŠ¬í”ˆ', 'ìŠ¬í”„']):
            genre = 'ìŠ¬í”ˆ ë°œë¼ë“œ'
            mood = 'ê°ì„±ì '
        else:
            genre = 'ê°ì„± íŒ'
            mood = 'ë”°ëœ»í•œ'
        
        return f"""ğŸµ íˆ¬ì‚¬ì´í´ AI ì‘ê³¡ê°€ - ìŒì•… ìƒì„± ì™„ë£Œ!

ğŸ¼ ì œëª©: íˆ¬ì‚¬ì´í´ì˜ ì„ ìœ¨ #{self.songs_made}
ğŸ­ ì¥ë¥´: {genre}
â¤ï¸ ë¶„ìœ„ê¸°: {mood}
âš¡ ìƒì„± ì‹œê°„: 2ì´ˆ (720ë°° ë¹ ë¥¸ ì°½ì‘)

ã€ê¸°ëŠ¥ ì ìš©ã€‘
âœ… ê°ì • ê¸°ë°˜ ì‘ê³¡: ìš”ì²­ ê°ì • ë¶„ì„ ì™„ë£Œ
âœ… ì‹¤ì‹œê°„ ë©œë¡œë””: ì¦‰ì„ ë©œë¡œë”” ìƒì„±
âœ… í™”ì„± ì§„í–‰: ìë™ ì½”ë“œ ì§„í–‰
âœ… ê°€ì‚¬ ìƒì„±: ê°ì • ë§ì¶¤ ê°€ì‚¬

ğŸ“ í˜•ì‹: MP3, WAV ì¤€ë¹„ ì™„ë£Œ
ğŸ§ í’ˆì§ˆ: ê³ ìŒì§ˆ (320kbps)
ğŸ’¾ ë‹¤ìš´ë¡œë“œ: ì¦‰ì‹œ ê°€ëŠ¥

íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ì˜ 720ë°° ë¹ ë¥¸ ì°½ì‘ë ¥ìœ¼ë¡œ ì™„ì„±! ğŸš€"""

class SimpleSorisayCore:
    """ê°„ë‹¨í•œ ì†Œë¦¬ìƒˆ ì½”ì–´"""
    
    def __init__(self):
        self.name = "íˆ¬ì‚¬ì´í´ ì†Œë¦¬ìƒˆ"
    
    def respond(self, message):
        """ì¼ë°˜ ì‘ë‹µ"""
        msg_lower = message.lower()
        
        if any(word in msg_lower for word in ['ì•ˆë…•', 'hello', 'í•˜ì´']):
            return "ì•ˆë…•í•˜ì„¸ìš”! íˆ¬ì‚¬ì´í´ ì†Œë¦¬ìƒˆì…ë‹ˆë‹¤! ğŸ§ ğŸ§  720ë°° ë¹ ë¥¸ ì§„í™”ë¡œ ë„ì›€ë“œë¦´ê²Œìš”!"
        
        elif any(word in msg_lower for word in ['ì‹œê°„', 'time']):
            return f"í˜„ì¬ ì‹œê°„ì€ {datetime.now().strftime('%H:%M:%S')}ì…ë‹ˆë‹¤! â°"
        
        elif any(word in msg_lower for word in ['ë‚ ì”¨', 'weather']):
            return "íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ìœ¼ë¡œ ë‚ ì”¨ë¥¼ ê°ì§€í•´ë³´ë‹ˆ... ì˜¤ëŠ˜ì€ ì½”ë”©í•˜ê¸° ì¢‹ì€ ë‚ ì”¨ë„¤ìš”! â˜€ï¸"
        
        else:
            return "íˆ¬ì‚¬ì´í´ ì†Œë¦¬ìƒˆê°€ 720ë°° ë¹ ë¥¸ ì†ë„ë¡œ ì—´ì‹¬íˆ í•™ìŠµí•˜ê³  ìˆì–´ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”? ğŸŒŸ"

class SimpleDreamInterpreter:
    """ê°„ë‹¨í•œ ê¿ˆ í•´ì„ì‚¬"""
    
    def __init__(self):
        self.name = "íˆ¬ì‚¬ì´í´ ê¿ˆ í•´ì„ì‚¬"
        self.dreams_analyzed = 0
    
    def interpret_dream(self, dream_text):
        """ê¿ˆ í•´ì„"""
        self.dreams_analyzed += 1
        
        return f"""ğŸŒ™ íˆ¬ì‚¬ì´í´ ê¿ˆ í•´ì„ì‚¬ - ë¶„ì„ ì™„ë£Œ!

ğŸ§  íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ë¶„ì„ ê²°ê³¼:
ë‹¹ì‹ ì˜ ê¿ˆì€ ë¬´ì˜ì‹ì˜ ì°½ì˜ì  ë©”ì‹œì§€ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.

ğŸ’¡ í•´ì„ #{self.dreams_analyzed}:
- ê¿ˆì˜ ìƒì§•ë“¤ì´ ì„±ì¥ê³¼ ë°œì „ì„ ì˜ë¯¸í•©ë‹ˆë‹¤
- ì ì¬ì˜ì‹ì´ ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ ì œì‹œí•˜ê³  ìˆì–´ìš”
- íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ì²˜ëŸ¼ ì´ì¤‘ì  ì‚¬ê³ ê°€ í•„ìš”í•œ ìƒí™©ì…ë‹ˆë‹¤

ğŸŒŸ ì¡°ì–¸:
ê¿ˆì´ ì£¼ëŠ” ì˜ê°ì„ í˜„ì‹¤ì—ì„œ ì°½ì˜ì ìœ¼ë¡œ í™œìš©í•´ë³´ì„¸ìš”!

720ë°° ë¹ ë¥¸ ë¶„ì„ìœ¼ë¡œ ê¹Šì€ ì˜ë¯¸ë¥¼ ì°¾ì•„ë“œë ¸ìŠµë‹ˆë‹¤! âœ¨"""

def run_sorisay_engine():
    """ì†Œë¦¬ìƒˆ ì—”ì§„ì„ ì‹¤í–‰í•˜ê³  ìŒì„± ëª…ë ¹ì„ ì²˜ë¦¬"""
    logger.info("ì†Œë¦¬ìƒˆ ì—”ì§„ ì´ˆê¸°í™”")
    sorisay = SorisayCore()  # â† íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ í¬í•¨ëœ ì½”ì–´

def main():
    """ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜"""
    
    print("ğŸŒŸ ì‹ ì„¸ê³„ íˆ¬ì‚¬ì´í´ ì†Œë¦¬ìƒˆ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ì‹œì‘!")
    print("="*60)
    print(f"ğŸ“… ì‹œì‘ ì‹œê°„: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
    
    try:
        # íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
        dual_brain_system = DualBrainShinsegyeSystem()
        
        # ì‹œìŠ¤í…œ ê°€ë™
        if dual_brain_system.start_dual_brain_system():
            
            print("\nğŸ¯ íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ê¸°ëŠ¥:")
            print("â€¢ ë¸Œë ˆì¸ A: ì‹¤ì‹œê°„ ì²˜ë¦¬ (100ms)")
            print("â€¢ ë¸Œë ˆì¸ B: ì§„í™” ì²˜ë¦¬ (5ì´ˆ)")
            print("â€¢ AI ì‘ê³¡ê°€: ê°ì • ê¸°ë°˜ ìŒì•… ìƒì„±")
            print("â€¢ ê¿ˆ í•´ì„ì‚¬: ë¬´ì˜ì‹ ë¶„ì„")
            print("â€¢ 720ë°° ë¹ ë¥¸ í•™ìŠµ ë° ì§„í™”")
            
            print("\nğŸ¤ ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´:")
            commands = [
                "ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸í•´ì¤˜",
                "íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ë³´ê³ ì„œ",
                "ì‚¬ë‘ ë…¸ë˜ ë§Œë“¤ì–´ì¤˜",
                "í–‰ë³µí•œ ìŒì•… ì‘ê³¡í•´ì¤˜",
                "ê¿ˆ í•´ì„í•´ì¤˜",
                "ì•ˆë…•í•˜ì„¸ìš”",
                "í˜„ì¬ ì‹œê°„ ì•Œë ¤ì¤˜"
            ]
            
            for i, cmd in enumerate(commands, 1):
                print(f"   {i}. \"{cmd}\"")
            
            # ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸
            print(f"\nğŸ§ª ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸:")
            test_commands = [
                "ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸í•´ì¤˜",
                "ì‚¬ë‘ ë…¸ë˜ ë§Œë“¤ì–´ì¤˜",
                "ì•ˆë…•í•˜ì„¸ìš”"
            ]
            
            for test_cmd in test_commands:
                print(f"\nğŸ¤ í…ŒìŠ¤íŠ¸: '{test_cmd}'")
                result = dual_brain_system.handle_voice_command(test_cmd)
                print(f"ğŸ¤– ì‘ë‹µ: {result[:150]}...")
            
            print(f"\nğŸ‰ íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ!")
            print("ğŸŒŸ íˆ¬ì‚¬ì´í´ ì†Œë¦¬ìƒˆì™€ ëŒ€í™”í•´ë³´ì„¸ìš”!")
            
            # ëŒ€í™” ëª¨ë“œ
            print("\nğŸ’­ ëŒ€í™” ëª¨ë“œ ì‹œì‘ (ì¢…ë£Œ: 'quit', 'exit', 'ì¢…ë£Œ')")
            
            while True:
                try:
                    user_input = input("\nğŸ‘¤ ì…ë ¥: ")
                    
                    if user_input.lower() in ['quit', 'exit', 'ì¢…ë£Œ', 'q']:
                        print("ğŸ‘‹ íˆ¬ì‚¬ì´í´ ì†Œë¦¬ìƒˆë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤!")
                        dual_brain_system.dual_brain_active = False
                        break
                    
                    if user_input.strip():
                        response = dual_brain_system.handle_voice_command(user_input)
                        print(f"ğŸ¤– íˆ¬ì‚¬ì´í´ ì†Œë¦¬ìƒˆ: {response}")
                
                except KeyboardInterrupt:
                    print("\nğŸ‘‹ íˆ¬ì‚¬ì´í´ ì†Œë¦¬ìƒˆë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤!")
                    dual_brain_system.dual_brain_active = False
                    break
        
        else:
            print("âŒ íˆ¬ì‚¬ì´í´ ë¸Œë ˆì¸ ì‹œìŠ¤í…œ ê°€ë™ ì‹¤íŒ¨")
            
    except Exception as e:
        print(f"âŒ ì‹œìŠ¤í…œ ì˜¤ë¥˜: {e}")
        import traceback
        traceback.print_exc()

if __name__ == "__main__":
    main()